---
card_room:
  color: "var(--google-grey-500)"
  show_icon: true
  show_name: true
  show_label: true
  variables:
    color_icon_1: "gray"
    color_icon_2: "gray"
    color_icon_3: "gray"
    color_icon_4: "gray"
    color_icon_5: "gray"
    color_bg_1: "gray"
    color_bg_2: "gray"
    color_bg_3: "gray"
    color_bg_4: "gray"
    color_bg_5: "gray"
  size: "45%"
  aspect_ratio: "1/1"
  label: |-
    [[[
      var temperature = entity.attributes.room_temperature;
      var temperature_2 = entity.attributes.temperature;
      var temperature_3 = entity.state;
      if (temperature != null){
        return temperature + '°C'
      }else if (temperature_2 != null){
        return temperature_2 + '°C'
      }else if (temperature_3 == "unavailable"){
        return '-' + '°C'
      }else if (temperature_3 != null){
        return temperature_3 + '°C'
      } else {
        return '-' + '°C'
      }
    ]]]
  state:
    - styles:
        custom_fields:
          notification:
            - border-radius: "50%"
            - border: "2px solid var(--card-background-color)"
            - width: "24.5px"
            - height: "24.5px"
            - position: "absolute"
            - left: "50%"
            - top: "50%"
            - transform: "translate(-50%,-50%)"
            - margin-top: "35%"
            - margin-left: "-35%"
            - line-height: 0
            - display: "grid"
            - background-color: >
                [[[
                  return "rgba(var(--color-red),1)";
                ]]]
      value: "unavailable"
  styles:
    card:
      - border-radius: "20px"
      - box-shadow: "var(--box-shadow)"
      - padding: "5px"
    grid:
      - grid-template-areas: "'n n n i1' 'l l l i2' 'i i . i3' 'i i . i4'"
      - grid-template-columns: "1fr 1fr 1fr 1fr"
      - grid-template-rows: "1fr 1fr 1fr 1fr"
      - justify-items: "center"
    icon:
      - color: "rgba(var(--color-theme),0.2)"
    img_cell:
      - background-color: "rgba(var(--color-theme),0.05)"
      - border-radius: "50%"
      - width: "75%"
      - height: "75%"
      - max-width: "none"
      - max-height: "none"
      - position: "absolute"
      - left: "50%"
      - top: "50%"
      - transform: "translate(-50%,-50%)"
      - margin-top: "25%"
      - margin-left: "-25%"
    name:
      - justify-self: "start"
      - align-self: "start"
      - font-weight: "bold"
      - font-size: "14px"
      - margin-left: "6px"
      - margin-top: "3px"
    label:
      - justify-self: "start"
      - font-weight: "bold"
      - font-size: "12px"
      - filter: "opacity(40%)"
      - margin-left: "6px"
      - margin-top: "20px"
      - position: "absolute"
    state:
      - justify-self: "start"
      - font-weight: "bold"
      - font-size: "12px"
      - filter: "opacity(40%)"
      - margin-left: "6px"
    custom_fields:
      i1:
        - border-radius: "50%"
        - width: "80%"
        - height: "80%"
        - line-height: 0
        - display: "grid"
      i2:
        - border-radius: "50%"
        - width: "80%"
        - height: "80%"
        - line-height: 0
        - display: "grid"
      i3:
        - border-radius: "50%"
        - width: "80%"
        - height: "80%"
        - line-height: 0
        - display: "grid"
      i4:
        - border-radius: "50%"
        - width: "80%"
        - height: "80%"
        - line-height: 0
        - display: "grid"
  custom_fields:
    notification: >
      [[[
        if (entity.state =='unavailable'){
          return `<ha-icon icon="mdi:exclamation" style="width: 50%; height: 50%; color: var(--primary-background-color);"></ha-icon>`
        }
      ]]]
    i1:
      card:
        type: "custom:button-card"
        template:
          - "widget_icon_room"
        variables:
          color_icon: "[[[ return variables.color_icon_1 ]]]"
          color_bg: "[[[ return variables.color_bg_1 ]]]"
        entity: >
          [[[
            if (variables.entity_id_1) {
              return variables.entity_id_1;
            }
          ]]]
        state:
          - operator: "template"
            value: "[[[ return !variables.entity_id_1; ]]]"
            styles:
              card:
                - display: "none"

    i2:
      card:
        type: "custom:button-card"
        template:
          - "widget_icon_room"
        variables:
          color_icon: "[[[ return variables.color_icon_2 ]]]"
          color_bg: "[[[ return variables.color_bg_2 ]]]"
        entity: >
          [[[
            if (variables.entity_id_2) {
              return variables.entity_id_2;
            }
          ]]]
        state:
          - operator: "template"
            value: "[[[ return !variables.entity_id_2; ]]]"
            styles:
              card:
                - display: "none"

    i3:
      card:
        type: "custom:button-card"
        template:
          - "widget_icon_room"
        variables:
          color_icon: "[[[ return variables.color_icon_3 ]]]"
          color_bg: "[[[ return variables.color_bg_3 ]]]"
        entity: >
          [[[
            if (variables.entity_id_3) {
              return variables.entity_id_3;
            }
          ]]]
        state:
          - operator: "template"
            value: "[[[ return !variables.entity_id_3; ]]]"
            styles:
              card:
                - display: "none"
    i4:
      card:
        type: "custom:button-card"
        template:
          - "widget_icon_room"
        variables:
          color_icon: "[[[ return variables.color_icon_4 ]]]"
          color_bg: "[[[ return variables.color_bg_4 ]]]"
        entity: >
          [[[
            if (variables.entity_id_4) {
              return variables.entity_id_4;
            }
          ]]]
        state:
          - operator: "template"
            value: "[[[ return !variables.entity_id_4; ]]]"
            styles:
              card:
                - display: "none"

widget_icon_room:
  tap_action:
    action: "toggle"
  hold_action:
    action: "more-info"
  show_icon: true
  show_name: false
  variables:
    color_icon: gray
    color_bg: gray
  styles:
    grid:
      - grid-template-areas: "'i'"
    card:
      - height: "100%"
      - box-shadow: "none"
      - padding: "0px"
    icon:
      - width: "50%"
      - height: "50%"
      - line-height: "0"
      - color: >
          [[[
            var color = [variables.color_icon];
            if (color == "gray"){
              var color = "rgba(var(--color-theme),0.20)";
            } else if(color == "yellow"){
              var color = "rgba(var(--color-yellow),1)";
            } else if(color == "blue"){
              var color = "rgba(var(--color-blue),1)";
            } else if(color == "purple"){
              var color = "rgba(var(--color-purple),1)";
            } else if(color == "green"){
              var color = "rgba(var(--color-green),1)";
            } else if(color == "red"){
              var color = "rgba(var(--color-red),1)";
            }
            return color;
          ]]]
    img_cell:
      - background-color: >
          [[[
            var color = [variables.color_bg];
            if (color == "gray"){
              var color = "rgba(var(--color-theme),0.05)";
            } else if(color == "yellow"){
              var color = "rgba(var(--color-yellow),0.20)";
            } else if(color == "blue"){
              var color = "rgba(var(--color-blue),0.20)";
            } else if(color == "purple"){
              var color = "rgba(var(--color-purple),0.20)";
            } else if(color == "green"){
              var color = "rgba(var(--color-green),0.20)";
            } else if(color == "red"){
              var color = "rgba(var(--color-red),0.20)";
            }
            return color;
          ]]]
      - border-radius: "50%"
  size: "15px"
  color: "var(--google-grey)"
